# =============================================================================
# AEFR 极限制式编译配置 (AEFR High-Performance Build Config)
# -----------------------------------------------------------------------------
# 本文件通过 Rust 编译器标志 (rustflags) 实现针对 Windows 平台的深度优化。
# 由于 AEFR 追求极致的 Spine 动画渲染性能与 100% 的分发自由度，
# 我们强制开启了本机 CPU 指令集优化与全静态链接。
# =============================================================================

# --- 针对 Windows GNU 工具链 (MinGW-w64) ---
# 适用场景：使用 GCC/MinGW 环境进行编译的用户
[target.x86_64-pc-windows-gnu]
rustflags = [
    # [性能] 强制编译器针对当前主机的 CPU 架构进行极致优化 (如 AVX2, FMA 等)。
    # 注意：本地生成的二进制文件可能无法在比当前 CPU 更旧的机器上运行。
    "-C", "target-cpu=native",      
    
    # [自由] 强制静态链接 C 运行时库与系统库，消除对外部 .dll 的依赖。
    "-C", "link-args=-static",      
    
    # [稳定] 确保 C 运行时 (CRT) 以静态方式集成，实现“一人一剑走天涯”的独立性。
    "-C", "target-feature=+crt-static" 
]

# --- 针对 Windows MSVC 工具链 (Microsoft Visual Studio) ---
# 适用场景：标准的 Windows 开发环境，建议大多数 PC 用户使用
[target.x86_64-pc-windows-msvc]
rustflags = [
    # [性能] 释放当前 CPU 的所有硬件潜能，让 Spine 蒙皮计算跑在指令集的尖端。
    "-C", "target-cpu=native",      
    
    # [独立] 开启 MSVC 的 /MT 编译模式，将 VCRuntime 静态嵌入 .exe 文件。
    # 彻底告别“缺少 msvcp140.dll”等运行报错。
    "-C", "target-feature=+crt-static", 
]

# =============================================================================
# [黑客提示 / Hacker Tips]
# 1. 为什么不提供二进制 Release？因为我们相信：Real hacks compile from source.
# 2. 本地编译能确保 AEFR 与您的硬件达到 100% 的“氧化”共鸣。
# =============================================================================
